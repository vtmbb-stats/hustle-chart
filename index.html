<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VT Men's Basketball Hustle Chart</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .animate-pulse {
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: .5; }
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useCallback, useEffect } = React;

        const HustleChartInput = () => {
            const [practiceDate, setPracticeDate] = useState(new Date().toISOString().split('T')[0]);
            const [selectedPlayer, setSelectedPlayer] = useState(null);
            const [playerStats, setPlayerStats] = useState({});
            const [allData, setAllData] = useState([]);

            // Your actual roster
            const players = [
                { number: 0, lastName: "Bedford", firstName: "Jailen" },
                { number: 1, lastName: "Lawal", firstName: "Tobi" },
                { number: 2, lastName: "Schutt", firstName: "Jaden" },
                { number: 3, lastName: "Hammond", firstName: "Ben" },
                { number: 4, lastName: "Pasha", firstName: "Izaiah" },
                { number: 5, lastName: "Jones", firstName: "Sin'Cere" },
                { number: 7, lastName: "Freeman", firstName: "Brett" },
                { number: 10, lastName: "Johnson", firstName: "Tyler" },
                { number: 13, lastName: "Hansberry", firstName: "Amani" },
                { number: 15, lastName: "Peterkin", firstName: "Snook" },
                { number: 17, lastName: "Avdalas", firstName: "Neo" },
                { number: 22, lastName: "Davis", firstName: "Solomon" },
                { number: 32, lastName: "Gurdak", firstName: "Christian" },
                { number: 77, lastName: "Dorn", firstName: "Antonio" }
            ];

            const hustleStats = {
                "Offensive": [
                    "Offensive Rebound", "Assist", "Extra Pass", 
                    "Screen Assist", "Gretzky", "Turnover"
                ],
                "Defensive": [
                    "Steal", "Deflection", "Charge Drawn", "Foul", 
                    "No Crash/Get Back", "Missed Close Out", "Missed Box Out"
                ],
                "Intangibles": [
                    "Hustle Play", "Body Language", "Coach's Point"
                ]
            };

            const getPlayerKey = (playerNumber) => `${practiceDate}-${playerNumber}`;

            const getStatValue = useCallback((playerNumber, stat) => {
                const key = getPlayerKey(playerNumber);
                return playerStats[key]?.[stat] || 0;
            }, [playerStats, practiceDate]);

            // Auto-save data to localStorage for real-time sharing
            const saveData = useCallback(() => {
                const dataToSave = {
                    playerStats,
                    allEvents: allData,
                    lastUpdated: new Date().toISOString()
                };
                // In production, this would save to a database
                // For now, we'll use a simple storage mechanism
                window.hustleChartData = dataToSave;
                console.log('Data auto-saved:', dataToSave);
            }, [playerStats, allData]);

            // Auto-save whenever data changes
            useEffect(() => {
                saveData();
            }, [saveData]);

            const updateStat = useCallback((playerNumber, stat, change) => {
                const key = getPlayerKey(playerNumber);
                
                setPlayerStats(prev => {
                    const newStats = { ...prev };
                    if (!newStats[key]) {
                        newStats[key] = {};
                    }
                    
                    const currentValue = newStats[key][stat] || 0;
                    const newValue = Math.max(0, currentValue + change);
                    newStats[key][stat] = newValue;
                    
                    return newStats;
                });

                // Log the event
                const event = {
                    practiceDate,
                    playerNumber,
                    playerName: players.find(p => p.number === playerNumber)?.lastName || 'Unknown',
                    stat,
                    timestamp: new Date().toISOString(),
                    change
                };
                
                setAllData(prev => [...prev, event]);
            }, [practiceDate, players]);

            const handlePlayerSelect = (playerNumber) => {
                setSelectedPlayer(playerNumber);
            };

            const StatSpinner = ({ playerNumber, stat, category }) => {
                const value = getStatValue(playerNumber, stat);
                const isNegativeStat = ['Turnover', 'Foul', 'No Crash/Get Back', 'Missed Close Out', 'Missed Box Out', 'Body Language'].includes(stat);
                
                return React.createElement('div', {
                    className: `flex items-center justify-between p-3 rounded-lg ${
                        isNegativeStat ? 'bg-red-50 border border-red-200' : 'bg-green-50 border border-green-200'
                    }`
                }, [
                    React.createElement('div', { className: "flex-1", key: "label" }, [
                        React.createElement('div', {
                            className: `text-sm font-medium ${isNegativeStat ? 'text-red-800' : 'text-green-800'}`,
                            key: "stat-name"
                        }, stat)
                    ]),
                    React.createElement('div', { className: "flex items-center gap-2", key: "controls" }, [
                        React.createElement('button', {
                            onClick: () => updateStat(playerNumber, stat, -1),
                            disabled: value === 0,
                            className: `w-8 h-8 rounded-full flex items-center justify-center font-bold text-white transition-colors ${
                                value === 0 
                                    ? 'bg-gray-300 cursor-not-allowed' 
                                    : isNegativeStat
                                    ? 'bg-green-500 hover:bg-green-600 active:bg-green-700'
                                    : 'bg-red-500 hover:bg-red-600 active:bg-red-700'
                            }`,
                            key: "minus-btn"
                        }, 'âˆ’'),
                        React.createElement('div', {
                            className: `w-12 text-center font-bold text-lg ${
                                isNegativeStat ? 'text-red-700' : 'text-green-700'
                            }`,
                            key: "value"
                        }, value),
                        React.createElement('button', {
                            onClick: () => updateStat(playerNumber, stat, 1),
                            className: `w-8 h-8 rounded-full flex items-center justify-center font-bold text-white transition-colors ${
                                isNegativeStat
                                    ? 'bg-red-500 hover:bg-red-600 active:bg-red-700'
                                    : 'bg-green-500 hover:bg-green-600 active:bg-green-700'
                            }`,
                            key: "plus-btn"
                        }, '+')
                    ])
                ]);
            };

            return React.createElement('div', { className: "max-w-6xl mx-auto p-4 bg-gray-50 min-h-screen" }, [
                // Header
                React.createElement('div', { className: "bg-white rounded-lg shadow-md p-6 mb-6", key: "header" }, [
                    React.createElement('div', { className: "flex flex-col sm:flex-row justify-between items-center gap-4" }, [
                        React.createElement('h1', { className: "text-3xl font-bold text-gray-800" }, "Virginia Tech Men's Basketball Hustle Chart"),
                        React.createElement('div', { className: "flex items-center gap-4" }, [
                            React.createElement('div', { className: "flex items-center gap-2" }, [
                                React.createElement('label', { className: "text-sm font-medium text-gray-700" }, "Practice Date:"),
                                React.createElement('input', {
                                    type: "date",
                                    value: practiceDate,
                                    onChange: (e) => setPracticeDate(e.target.value),
                                    className: "px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                                })
                            ]),
                            React.createElement('div', { className: "flex items-center gap-2 text-sm text-green-600" }, [
                                React.createElement('div', { className: "w-2 h-2 bg-green-500 rounded-full animate-pulse" }),
                                React.createElement('span', {}, "Auto-saving data")
                            ])
                        ])
                    ])
                ]),
                
                // Player Selection
                React.createElement('div', { className: "bg-white rounded-lg shadow-md p-6 mb-6", key: "players" }, [
                    React.createElement('h2', { className: "text-xl font-semibold text-gray-800 mb-4" }, "Select Player"),
                    React.createElement('div', { className: "grid grid-cols-7 gap-3" }, 
                        players.map((player) => 
                            React.createElement('button', {
                                key: player.number,
                                onClick: () => handlePlayerSelect(player.number),
                                className: `p-4 rounded-lg border-2 transition-all font-semibold text-lg ${
                                    selectedPlayer === player.number
                                        ? 'border-blue-500 bg-blue-100 text-blue-800 shadow-md scale-105'
                                        : 'border-gray-200 bg-white text-gray-700 hover:border-gray-300 hover:bg-gray-50'
                                }`
                            }, [
                                React.createElement('div', { className: "text-2xl font-bold", key: "number" }, player.number),
                                React.createElement('div', { className: "text-sm", key: "name" }, player.lastName)
                            ])
                        )
                    )
                ]),

                // Stats Input or Empty State
                selectedPlayer ? 
                    React.createElement('div', { className: "bg-white rounded-lg shadow-md p-6", key: "stats" }, [
                        React.createElement('h2', { className: "text-xl font-semibold text-gray-800 mb-4" }, 
                            `Stats for ${players.find(p => p.number === selectedPlayer)?.firstName} ${players.find(p => p.number === selectedPlayer)?.lastName}`
                        ),
                        React.createElement('div', { className: "grid grid-cols-1 lg:grid-cols-3 gap-6" },
                            Object.entries(hustleStats).map(([category, stats]) =>
                                React.createElement('div', { key: category, className: "space-y-3" }, [
                                    React.createElement('h3', {
                                        className: "text-lg font-semibold text-center py-2 px-4 rounded-lg bg-gray-100 text-gray-800",
                                        key: "category-title"
                                    }, category),
                                    ...stats.map((stat) =>
                                        React.createElement(StatSpinner, {
                                            key: stat,
                                            playerNumber: selectedPlayer,
                                            stat: stat,
                                            category: category
                                        })
                                    )
                                ])
                            )
                        )
                    ]) :
                    React.createElement('div', { className: "bg-white rounded-lg shadow-md p-12 text-center", key: "empty" },
                        React.createElement('div', { className: "text-gray-500 text-lg" }, "Select a player to start tracking hustle stats")
                    )
            ]);
        };

        ReactDOM.render(React.createElement(HustleChartInput), document.getElementById('root'));
    </script>
</body>
</html>
